# ๐ค ุฑุจุงุช ูุฏุฑุช ูุงู ุชูฺฏุฑุงู - ูุณุฎู ูุฏููุงุฑ

## ๐ ูุนุฑู

ุงู ูุณุฎู ุจูุจูุฏ ุงูุชู ู ูุฏููุงุฑ ุดุฏู ุฑุจุงุช ูุฏุฑุช ูุงู ุชูฺฏุฑุงู ุงุณุช ฺฉู ุจุง ุณุงุฎุชุงุฑ ููุธู ู ูุงุจูุชโูุง ูพุดุฑูุชู ุงุฑุงุฆู ูโุดูุฏ.

## ๐ ุณุงุฎุชุงุฑ ูพุฑูฺู

```
/app/bot/
โโโ ๐ config/                  # ุชูุธูุงุช ู ูพฺฉุฑุจูุฏ
โ   โโโ settings.py            # ุชูุธูุงุช ุงุตู ุฑุจุงุช
โ   โโโ __init__.py
โโโ ๐ database/               # ุนููุงุช ุฏุชุงุจุณ
โ   โโโ db_manager.py          # ูุฏุฑ ฺฉู ุฏุชุงุจุณ
โ   โโโ __init__.py
โโโ ๐ models/                 # ูุฏูโูุง ุฏุงุฏู
โ   โโโ database_models.py     # ูุฏูโูุง Category, File, UserSession
โ   โโโ __init__.py
โโโ ๐ handlers/              # ููุฏูุฑูุง ูุฎุชูู
โ   โโโ base_handler.py       # ฺฉูุงุณ ูพุงู ููู ููุฏูุฑูุง
โ   โโโ category_handler.py   # ูุฏุฑุช ุฏุณุชูโูุง
โ   โโโ file_handler.py       # ูุฏุฑุช ูุงูโูุง
โ   โโโ message_handler.py    # ูุฏุฑุช ูพุงูโูุง
โ   โโโ broadcast_handler.py  # ุจุฑูุฏฺฉุณุช
โ   โโโ search_handler.py     # ุฌุณุชุฌู
โ   โโโ __init__.py
โโโ ๐ actions/               # ุงฺฉุดูโูุง ุฎุงุต
โ   โโโ stats_action.py       # ููุงุด ุขูุงุฑ
โ   โโโ backup_action.py      # ูพุดุชุจุงูโฺฏุฑ
โ   โโโ __init__.py
โโโ ๐ utils/                 # ุงุจุฒุงุฑูุง ฺฉูฺฉ
โ   โโโ keyboard_builder.py   # ุณุงุฎุช ฺฉุจูุฑุฏ
โ   โโโ helpers.py            # ุชูุงุจุน ฺฉูฺฉ
โ   โโโ __init__.py
โโโ ๐ backups/               # ูพุดุชุจุงูโูุง ุฏุชุงุจุณ
โโโ bot_main.py               # ูุงู ุงุตู ุฑุจุงุช
โโโ telegram_bot_runner_new.py # ุฑุงูโุงูุฏุงุฒ ุฌุฏุฏ
โโโ bot_database.db           # ุฏุชุงุจุณ SQLite
โโโ README_MODULAR.md         # ุงู ูุงู
```

## โจ ุงูฺฉุงูุงุช ุฌุฏุฏ

### ๐ ุงูฺฉุงูุงุช ุงุถุงูู ุดุฏู:
- **ุญุฐู ูุงูโูุง**: ุงูฺฉุงู ุญุฐู ูุงูโูุง ุงุฒ ุฏุชุงุจุณ
- **ูุฑุงุด ูุงูโูุง**: ุชุบุฑ ูุงู ู ุชูุถุญุงุช ูุงูโูุง
- **ูุฑุงุด ุฏุณุชูโูุง**: ุชุบุฑ ูุงู ู ุชูุถุญุงุช ุฏุณุชูโูุง
- **ุญุฐู ุฏุณุชูโูุง**: ุญุฐู ุฏุณุชูโูุง ุจุง ุงูุชูุงู ูุญุชูุง ุจู ุฏุณุชู ูุงูุฏ
- **ุฏุงูููุฏ ูุณุชูู**: ุฏุงูููุฏ ูุงูโูุง ูุณุชููุงู ุงุฒ ุฑุจุงุช
- **ูพุดุชุจุงูโฺฏุฑ ุฎูุฏฺฉุงุฑ**: ุชูู ูุณุฎู ูพุดุชุจุงู ุงุฒ ุฏุชุงุจุณ
- **ุขูุงุฑ ุชูุตู**: ููุงุด ุขูุงุฑ ฺฉุงูู ู ุชูุตู
- **ุจูุจูุฏ UI/UX**: ุฑุงุจุท ฺฉุงุฑุจุฑ ุจูุชุฑ ู ูพุงูโูุง ุฑุงูููุง

### ๐ ุจูุจูุฏูุง ุณุงุฎุชุงุฑ:
- **ูุฏููุงุฑ**: ฺฉุฏ ุชูุณู ุดุฏู ุจู ูุงฺููโูุง ููุทู
- **ูุงุจูุช ุชูุณุนู**: ุงูฺฉุงู ุงุถุงูู ฺฉุฑุฏู ูุงุจูุชโูุง ุฌุฏุฏ
- **ูุฏุฑุช ุฎุทุง**: ุณุณุชู ุจูุชุฑ ูุฏุฑุช ุฎุทุงูุง
- **ูุงฺฏโฺฏุฑ**: ุณุณุชู ูุงฺฏ ูพุดุฑูุชู
- **ฺฉุด**: ุจูููโุณุงุฒ ุนููฺฉุฑุฏ

## ๐ ุฑุงูโุงูุฏุงุฒ

### ุฑูุด 1: ุงุณุชูุงุฏู ุงุฒ ุฑุจุงุช ุฌุฏุฏ
```bash
cd /app/bot
python telegram_bot_runner_new.py
```

### ุฑูุด 2: ุงุณุชูุงุฏู ุงุฒ supervisor
```bash
# ุงุถุงูู ฺฉุฑุฏู ุชูุธูุงุช ุฌุฏุฏ ุจู supervisor
sudo nano /etc/supervisor/conf.d/telegram_bot_modular.conf

# ูุญุชูุง:
[program:telegram_bot_modular]
command=python3 /app/bot/telegram_bot_runner_new.py
directory=/app/bot
autostart=true
autorestart=true
user=root
stdout_logfile=/var/log/supervisor/telegram_bot_modular.out.log
stderr_logfile=/var/log/supervisor/telegram_bot_modular.err.log

# ุฑุงูโุงูุฏุงุฒ
sudo supervisorctl reread
sudo supervisorctl update
sudo supervisorctl start telegram_bot_modular
```

## ๐ฑ ุฏุณุชูุฑุงุช ุฌุฏุฏ

### ุฏุณุชูุฑุงุช ุฑุจุงุช:
- `/start` - ุดุฑูุน ูุฌุฏุฏ ู ููุงุด ููู ุงุตู
- `/help` - ููุงุด ุฑุงูููุง ฺฉุงูู
- `/stats` - ููุงุด ุขูุงุฑ ุชูุตู
- `/backup` - ุชูู ูุณุฎู ูพุดุชุจุงู

### ุงูฺฉุงูุงุช ุฑุงุจุท ฺฉุงุฑุจุฑ:
- **โ๏ธ ูุฑุงุด ุฏุณุชู** - ุชุบุฑ ูุงู ุฏุณุชูโูุง
- **๐ ุญุฐู ุฏุณุชู** - ุญุฐู ุฏุณุชู ุจุง ุชุฃุฏ
- **๐ ุฌุฒุฆุงุช ูุงู** - ููุงุด ุงุทูุงุนุงุช ฺฉุงูู ูุงู
- **๐ฅ ุฏุงูููุฏ** - ุฏุงูููุฏ ูุณุชูู ูุงู
- **โ๏ธ ูุฑุงุด ูุงู** - ุชุบุฑ ูุงู ู ุชูุถุญุงุช
- **๐ ุญุฐู ูุงู** - ุญุฐู ูุงู ุจุง ุชุฃุฏ
- **๐ ุงูุชูุงู ูุงู** - ุงูุชูุงู ุจู ุฏุณุชู ุฏฺฏุฑ

## ๐ง ุชูุธูุงุช

### ูุงู `config/settings.py`:
```python
# ุชูุธูุงุช ุงุตู
BOT_TOKEN = "YOUR_BOT_TOKEN"
STORAGE_CHANNEL_ID = -1002546879743
MAX_FILE_SIZE = 50 * 1024 * 1024  # 50MB
```

### ูุณุฑูุง ููู:
- **ุฏุชุงุจุณ**: `/app/bot/bot_database.db`
- **ูพุดุชุจุงูโูุง**: `/app/bot/backups/`
- **ูุงฺฏโูุง**: `/var/log/telegram_bot_modular.log`

## ๐ ุชูุณุนู ู ุณูุงุฑุดโุณุงุฒ

### ุงูุฒูุฏู ูุงุจูุช ุฌุฏุฏ:
1. ุงุฌุงุฏ handler ุฌุฏุฏ ุฏุฑ ูพูุดู `handlers/`
2. ุงุถุงูู ฺฉุฑุฏู ุจู `bot_main.py`
3. ุชุนุฑู callback ุฏุฑ `handle_callback_query`

### ูุซุงู ุงุถุงูู ฺฉุฑุฏู handler:
```python
# handlers/new_handler.py
from handlers.base_handler import BaseHandler

class NewHandler(BaseHandler):
    async def new_function(self, update, context):
        # ูพุงุฏูโุณุงุฒ ูุงุจูุช ุฌุฏุฏ
        pass
```

## ๐ ูุงูุชูุฑูฺฏ

### ุจุฑุฑุณ ูุถุนุช:
```bash
# ูุถุนุช supervisor
sudo supervisorctl status telegram_bot_modular

# ูุงฺฏโูุง ุฑุจุงุช
tail -f /var/log/telegram_bot_modular.log

# ุขูุงุฑ ุฏุชุงุจุณ
sqlite3 /app/bot/bot_database.db "SELECT COUNT(*) FROM files;"
```

### ูพุดุชุจุงูโฺฏุฑ:
```bash
# ูพุดุชุจุงูโฺฏุฑ ุฏุณุช
python3 -c "
import asyncio
from database.db_manager import DatabaseManager
asyncio.run(DatabaseManager().create_backup())
"
```

## ๐ ุงููุช

- ุชูุงู ูุฑูุฏโูุง ฺฉุงุฑุจุฑ ุงุนุชุจุงุฑุณูุฌ ูโุดููุฏ
- ูุงูโูุง ุจุฒุฑฺฏโุชุฑ ุงุฒ ุญุฏ ูุฌุงุฒ ุฑุฏ ูโุดููุฏ  
- ุณุณุชู ูุฏุฑุช ุฎุทุง ูู
- ูุงฺฏโฺฏุฑ ฺฉุงูู ุนููุงุช

## ๐ ุนุจโุงุจ

### ูุดฺฉูุงุช ุฑุงุฌ:

1. **ุฑุจุงุช ุดุฑูุน ููโุดูุฏ**:
   ```bash
   # ุจุฑุฑุณ ูุงฺฏโูุง
   tail -f /var/log/supervisor/telegram_bot_modular.err.log
   ```

2. **ุฎุทุง import**:
   ```bash
   # ุจุฑุฑุณ ูุณุฑ Python
   cd /app/bot && python3 -c "import bot_main"
   ```

3. **ูุดฺฉู ุฏุชุงุจุณ**:
   ```bash
   # ุจุฑุฑุณ ุฏุชุงุจุณ
   sqlite3 /app/bot/bot_database.db ".tables"
   ```

## ๐ ูพุดุชุจุงู

ุจุฑุง ูุดฺฉูุงุช ูู:
1. ุจุฑุฑุณ ูุงฺฏโูุง ุฏุฑ `/var/log/`
2. ุงุฌุฑุง ุชุณุชโูุง ุจุง `python test_bot.py`
3. ุจุฑุฑุณ ูุถุนุช ุฏุชุงุจุณ
4. ุฑุงูโุงูุฏุงุฒ ูุฌุฏุฏ ุณุฑูุณ

---

**ูุณุฎู**: 2.0.0 (ูุฏููุงุฑ)  
**ุชุงุฑุฎ**: ุฏุณุงูุจุฑ 2024  
**ุณุงุฒูุฏู**: ุชู ุชูุณุนู ุฑุจุงุช ูุงู